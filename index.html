<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>뉴키즈 - 어린이집/유치원 파트너</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header></header>

    <section class="hero">
        <div class="container hero-content">
            <h1>우리 원에 필요한 모든 즐거움<br>뉴키즈 (New Kids)</h1>
            <p>검증된 영유아 교재부터 특별한 원어민 행사까지,<br>선생님과 아이들이 모두 행복한 교육 파트너</p>
            <a href="proposal.html" class="btn">제안서 / 견적 요청하기</a>
        </div>
    </section>

    <section id="curriculum">
        <div class="container-wide">
            <h2>뉴키즈 교육 프로그램</h2>
            <p class="section-desc">영아부터 유아까지, 핵심 영역의 통합 교육 솔루션</p>
            <div id="edu-grid" class="main-grid program-grid"></div>
        </div>
    </section>

    <section id="events" class="bg-gray">
        <div class="container">
            <h2>특별한 행사 프로그램</h2>
            <p class="section-desc">아이들에게 잊지 못할 추억을 선물하세요</p>
            <div id="event-grid" class="main-grid"></div>
        </div>
    </section>

    <section id="contact" class="contact-section">
        <div class="container">
            <h2 class="contact-title">궁금하신 점이 있으신가요?</h2>
            <p class="contact-desc">아래 번호로 전화주시면 자세한 상담을 도와드리겠습니다.</p>
            
            <div class="contact-info-wrap">
                <a href="tel:010-2333-2563" class="contact-link">
                    <span class="contact-icon">📞</span>
                    상담문의 1: <strong>010-2333-2563</strong>
                </a>
                <a href="tel:010-5522-8109" class="contact-link">
                    <span class="contact-icon">📞</span>
                    상담문의 2: <strong>010-5522-8109</strong>
                </a>
            </div>
        </div>
    </section>

    <footer></footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="manager.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // manager.js 로딩 대기 후 실행
            const checkSb = setInterval(() => {
                if (window.sb) { clearInterval(checkSb); loadMainCategories(); }
            }, 100);
        });

        async function loadMainCategories() {
            try {
                const { data } = await window.sb.from('program_categories')
                    .select('*').eq('is_visible', true).order('order_num');

                if (!data) return;

                const eduGrid = document.getElementById('edu-grid');
                const eventGrid = document.getElementById('event-grid');
                const legacyFiles = ['season', 'culture', 'performance'];

                // [수정] 카테고리별 아이콘 매핑 목록
                const iconMap = {
                    'korean': '🇰🇷',       // 한글
                    'reading': '📖',      // 독서
                    'english': '🔤',      // 영어
                    'math': '🔢',         // 수학
                    'science': '🔬',      // 과학
                    'art': '🎨',          // 미술
                    'coding': '💻',       // 코딩
                    'environment': '🌱',  // 환경
                    'nuri': '🐣',         // 누리과정
                    'infant': '🧸',       // 영아
                    'special': '✨',      // 특색/기타
                    'season': '🎉',       // 시즌 테마
                    'culture': '🌍',      // 원어민 문화
                    'performance': '👨‍👩‍👧‍👦' // 부모 참여
                };

                data.forEach(cat => {
                    let href = cat.type === 'EDU' ? `child.html#${cat.code}` : (legacyFiles.includes(cat.code) ? `${cat.code}.html` : `program.html#${cat.code}`);
                    
                    // 매핑된 아이콘이 있으면 사용, 없으면 기본 별(⭐) 사용
                    let icon = iconMap[cat.code] || '⭐';

                    const html = `
                            <a href="${href}" class="card">
                                <div class="card-icon">${icon}</div>
                                <h3>${cat.name}</h3>
                                <p>${cat.hero_desc || '뉴키즈의 특별한 프로그램'}</p>
                                <span class="card-link">자세히 보기 &rarr;</span>
                            </a>`;

                    if (cat.type === 'EDU') eduGrid.insertAdjacentHTML('beforeend', html);
                    else eventGrid.insertAdjacentHTML('beforeend', html);
                });
            } catch (e) { console.error(e); }
        }
    </script>
</body>
</html>